#{extends 'content.html' /}
#{set 'title'}
    &{'experts.explore'}
#{/set}

#{set currentMenu:'menuExperts' /}


#{set contentCenterClass:'mini' /}

<h2 class="cuf-grb">&{'expertstitle'}</h2>

<div class="listinsights listexperts">
    <ul class="menulistinsights">
    	*{
        <li class="sortby">Sort by</li>
        <li class="first"><a href="#">Favorites</a></li>
        <li class="selectme"><a href="#" id="select-tri">select a category</a>
            <ul class="nojavascript" id="ulselect-tri">
                <li><a href="#"><span>Technology</span></a></li>
                <li><a href="#"><span>Web</span></a></li>
                <li class="last"><a href="#"><span>Sport</span></a></li>
            </ul>
        </li>
        }*
    </ul>
    
    <!-- expert search -->
    <div class="item-expert">
        <div class="content-expert">
            <form action="#" class="searchexp" id="searchExpForm">
                <label for="query" class="nodisplay">&{'expertssearch'}</label>
                <input type="text" value="${query}" name="query" id="query" class="txtinput"  placeholder="&{'expertssearch'}"/>
                <input type="submit" name="sub-expert" value="&{expertssearchbutton}" class="subinput"/>
            </form>
        </div>
    </div>
    
	<div id="expertSearchResult">
		<ul id="expertsList">
	    	#{listExperts experts:experts /}
		</ul>
	</div>
    <div class="seeall">
        <p><a id="moreExperts" href="#">&{'experts.loadmore'}</a></p>
    </div>
</div>

<script type="text/javascript">
var expertsFrom = ${controllers.Application.NUMBER_EXPERTS_EXPERTPAGE}; 
var searchQuery = '';

$('#searchExpForm').submit( function() {
	expertsFrom = 0; 
	searchQuery = $('#query').val();
    $.ajax( {
        url: searchExpertsAction(),
        data: {"from":expertsFrom, "query":searchQuery },
        success: onSearchExpertsSuccess
    } );
    return false;
});

function onSearchExpertsSuccess(content) {
	//$("#expertSearchResult").hide('slide', {direction: 'left'}, 500);
	/*
	$("#expertSearchResult").hide('slide', {direction: 'left'}, 500);
	$("#expertSearchResult").empty();
	$("#expertSearchResult").append(content);
	$("#expertSearchResult").show('slide', {direction: 'right'}, 500);
	*/
	$("#expertSearchResult").empty();
	$("#expertSearchResult").append(content);
	
	expertsFrom += ${controllers.Application.NUMBER_EXPERTS_EXPERTPAGE};
}

/** get more insights */
$('#moreExperts').click( function() {
    $.ajax( {
        url: searchExpertsAction(),
        data: {"from":expertsFrom, "query":searchQuery },
        success: onMoreExpertsSuccess
    } );
    return false;
});

function onMoreExpertsSuccess(content) {
	/*
	$("#expertSearchResult").hide('slide', {direction: 'left'}, 500);
	$("#expertSearchResult").empty();
	$("#expertSearchResult").append(content);
	$("#expertSearchResult").show('slide', {direction: 'right'}, 500);
	*/
	//$("#expertSearchResult").empty();
	$("#expertSearchResult").append(content);
	
    //$("#expertsList").append(content);
    expertsFrom += ${controllers.Application.NUMBER_EXPERTS_EXPERTPAGE};
}
</script>
