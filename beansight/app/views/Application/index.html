#{extends 'main.html' /}
#{set title:'Beansight: Home' /}

#{if flash.error}
    <p>${flash.error}</p>
#{/if}

#{form @Application.createInsight()}
    <p>
        <label for="author">Share your insight :</label>
        <input type="text" name="insightContent" id="insightContent" />
    </p>
#{/form}

<ul>
    #{list items:insights, as:'insight' }
        <li><a href="@{Application.showInsight(insight.id)}">${insight.content}</a> (by <a href="@{Application.showUser(insight.creator.id)}">${insight.creator.userName}</a>) <a href="@{Application.agree(insight.id)}">Agree</a> (${insight.getPositiveVoteNumber()}) <a href="@{Application.disagree(insight.id)}">Disagree</a> (${insight.getNegativeVoteNumber()})</li>
    #{/list}
</ul>
